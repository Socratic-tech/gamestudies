<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAME DETECTOR: CHAMPIONSHIP DUEL</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bungee&family=Press+Start+2P&family=Outfit:wght@400;900&display=swap');

        :root {
            --neon-pink: #ff2d55; --neon-blue: #00f2ff; --neon-green: #39ff14;
            --neon-yellow: #fff200; --dark-bg: #050508; --panel: #111116;
        }

        body { 
            background-color: var(--dark-bg); color: white; font-family: 'Outfit', sans-serif; 
            margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh;
            padding-bottom: 120px; /* Space for the persistent cheat sheet */
        }

        /* ANIMATIONS */
        @keyframes pulse-gold { 0%, 100% { box-shadow: 0 0 10px var(--neon-yellow); } 50% { box-shadow: 0 0 30px var(--neon-yellow); } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }

        .screen { display: none; width: 100%; max-width: 1000px; flex-direction: column; }
        .active-screen { display: flex; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* SCOREBOARD */
        .scoreboard { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; gap: 20px; }
        .team-pod { flex: 1; background: var(--panel); border: 4px solid #222; padding: 20px; border-radius: 20px; text-align: center; }
        .active-team { border-color: var(--neon-yellow); box-shadow: 0 0 20px rgba(255, 242, 0, 0.2); }
        .score { font-family: 'Press Start 2P', cursive; font-size: 2.5rem; margin: 10px 0; color: var(--neon-green); }

        /* DISPLAY BOXES */
        .display-box { background: #000; border: 3px solid var(--neon-blue); border-radius: 25px; padding: 40px; text-align: center; margin-bottom: 25px; }
        h2 { font-family: 'Bungee'; color: var(--neon-yellow); margin: 0; font-size: 1.8rem; }

        /* OPTIONS */
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .opt-btn { background: #1a1a1f; border: 3px solid #333; color: #fff; padding: 25px; font-family: 'Bungee'; font-size: 1.2rem; border-radius: 15px; cursor: pointer; transition: 0.2s; }
        .opt-btn:hover:not(.locked) { border-color: var(--neon-blue); transform: translateY(-3px); }
        .is-correct { background: var(--neon-green) !important; color: #000 !important; border-color: #fff !important; }
        .is-wrong { background: var(--neon-pink) !important; animation: shake 0.3s; }

        /* FINAL PHASE TOOLS */
        .wager-card { background: #111; border: 3px solid var(--neon-pink); padding: 30px; border-radius: 20px; text-align: center; flex: 1; }
        .wager-input { background: #000; border: 2px solid var(--neon-pink); color: white; font-family: 'Press Start 2P'; padding: 15px; width: 80%; font-size: 1.5rem; text-align: center; margin: 15px 0; border-radius: 10px; }
        .vote-panel { display: flex; gap: 20px; width: 100%; margin-top: 20px; }
        .vote-box { flex: 1; text-align: center; padding: 20px; border: 2px dashed #444; border-radius: 20px; }
        .locked { background: var(--neon-green) !important; color: #000 !important; font-weight: 900; border-color: #fff !important; }

        /* CHEAT SHEET (PERSISTENT) */
        .cheat-sheet {
            position: fixed; bottom: 0; left: 0; width: 100%; background: #000; border-top: 2px solid #333;
            display: grid; grid-template-columns: repeat(6, 1fr); padding: 15px 0; text-align: center; font-size: 0.7rem; z-index: 100;
        }
        .cheat-sheet b { color: var(--neon-blue); display: block; font-family: 'Bungee'; font-size: 0.8rem; margin-bottom: 3px; }

        .btn-nav { font-family: 'Bungee'; padding: 15px 40px; font-size: 1.4rem; border: none; border-radius: 50px; cursor: pointer; margin-top: 20px; align-self: center; background: var(--neon-blue); color: #000; box-shadow: 0 5px 0 #008ba3; }
        .btn-nav:active { transform: translateY(3px); box-shadow: none; }
    </style>
</head>
<body>

    <div id="setup-screen" class="screen active-screen" style="text-align: center; margin-top: 50px;">
        <h1 style="font-family:'Bungee'; font-size: 4rem; margin: 0;">GAME DETECTOR</h1>
        <p style="color: var(--neon-pink); font-family: 'Bungee'; letter-spacing: 3px;">CRITICAL THINKING CHALLENGE</p>
        <div style="margin-top: 40px; background: var(--panel); padding: 40px; border-radius: 30px; border: 2px solid #333;">
            <input type="text" id="name-a" placeholder="TEAM 1 NAME" style="padding:15px; width:280px; text-align:center; font-family:'Bungee'; border-radius: 10px; border: 2px solid var(--neon-blue);">
            <input type="text" id="name-b" placeholder="TEAM 2 NAME" style="padding:15px; width:280px; text-align:center; margin-left:10px; font-family:'Bungee'; border-radius: 10px; border: 2px solid var(--neon-pink);">
            <br><br>
            <button class="btn-nav" onclick="startGame()">INITIALIZE ROUND 1</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div class="scoreboard">
            <div id="box-a" class="team-pod active-team">
                <div id="disp-a" style="font-family: 'Bungee'; color: var(--neon-blue);">TEAM 1</div>
                <div id="score-a" class="score">00</div>
            </div>
            <div style="text-align: center; padding-top: 15px;">
                <h3 id="round-num" style="color: var(--neon-yellow); font-family: 'Bungee'; margin:0; font-size: 1.5rem;">1/10</h3>
                <p id="turn-txt" style="font-size: 0.7rem; color: #666; font-weight: bold;">TEAM 1 TURN</p>
            </div>
            <div id="box-b" class="team-pod">
                <div id="disp-b" style="font-family: 'Bungee'; color: var(--neon-pink);">TEAM 2</div>
                <div id="score-b" class="score">00</div>
            </div>
        </div>
        <div class="display-box">
            <h2 id="q-text">WHICH IS THE TRUE GAME?</h2>
            <div id="feedback" style="display:none; color: var(--neon-green); margin-top:15px; font-weight: bold; font-size: 1.1rem; line-height: 1.4;"></div>
        </div>
        <div class="options-grid">
            <button class="opt-btn" onclick="check(0)" id="o0"></button>
            <button class="opt-btn" onclick="check(1)" id="o1"></button>
            <button class="opt-btn" onclick="check(2)" id="o2"></button>
            <button class="opt-btn" onclick="check(3)" id="o3"></button>
        </div>
        <button id="next-btn" class="btn-nav" style="display:none;" onclick="next()">NEXT ROUND >></button>
    </div>

    <div id="wager-screen" class="screen" style="text-align: center;">
        <h1 style="font-family:'Bungee'; color:var(--neon-pink); font-size: 3rem; margin: 0;">FINAL WAGER</h1>
        <p style="color: #888;">BET UP TO YOUR TOTAL SCORE</p>
        <div style="display:flex; gap:20px; margin-top:30px;">
            <div class="wager-card" style="border-color: var(--neon-blue);">
                <h3 id="w-name-a" style="font-family:'Bungee'; margin:0;">TEAM 1</h3>
                <input type="number" id="wager-a" class="wager-input" value="0">
                <p>MAX: <span id="max-a">0</span></p>
            </div>
            <div class="wager-card">
                <h3 id="w-name-b" style="font-family:'Bungee'; margin:0;">TEAM 2</h3>
                <input type="number" id="wager-b" class="wager-input" value="0">
                <p>MAX: <span id="max-b">0</span></p>
            </div>
        </div>
        <button class="btn-nav" onclick="lockWagers()">CONFIRM BOTH WAGERS</button>
    </div>

    <div id="final-screen" class="screen">
        <div class="display-box" style="border-color:var(--neon-yellow); animation: pulse-gold 2s infinite;">
            <h1 style="font-family:'Bungee'; margin:0; color: var(--neon-yellow);">THE FINAL CASE</h1>
            <p id="final-desc" style="font-size: 1.3rem; margin-top:20px; line-height: 1.6; color: #fff;"></p>
        </div>
        <div class="vote-panel">
            <div class="vote-box">
                <h3 id="v-name-a" style="font-family:'Bungee'; color:var(--neon-blue);">TEAM 1</h3>
                <button class="opt-btn" style="width:100%; margin-bottom:10px;" id="va-t" onclick="cast('a', true)">IT'S A GAME</button>
                <button class="opt-btn" style="width:100%;" id="va-f" onclick="cast('a', false)">NOT A GAME</button>
            </div>
            <div class="vote-box">
                <h3 id="v-name-b" style="font-family:'Bungee'; color:var(--neon-pink);">TEAM 2</h3>
                <button class="opt-btn" style="width:100%; margin-bottom:10px;" id="vb-t" onclick="cast('b', true)">IT'S A GAME</button>
                <button class="opt-btn" style="width:100%;" id="vb-f" onclick="cast('b', false)">NOT A GAME</button>
            </div>
        </div>
        <button id="reveal-btn" class="btn-nav" style="display:none; background:var(--neon-green);" onclick="resolveDuel()">REVEAL TRUTH & WINNER</button>
    </div>

    <div class="cheat-sheet">
        <div><b>RULES</b>The boundaries & limits</div>
        <div><b>GOALS</b>Defined Win/Loss state</div>
        <div><b>INTERACTION</b>Player has agency</div>
        <div><b>CHALLENGE</b>Effort or skill required</div>
        <div><b>RESPONSE</b>Direct system feedback</div>
        <div><b>DOING</b>Active participation</div>
    </div>

    <script>
        const rounds = [
            { opts: ["CHESS", "A TOY BOX", "AN ALARM CLOCK", "A DICTIONARY"], correct: 0, why: "Chess has strict Rules and a Win/Loss Goal. A toy box is a container; a dictionary is a tool." },
            { opts: ["A FLIGHT SIMULATOR", "A JIGSAW PUZZLE", "MARIO KART", "A MOVIE"], correct: 2, why: "Mario Kart has a winner. Flight Sims are 'Simulations' designed for mimicry, not ludic victory." },
            { opts: ["A BOXING MATCH", "A FIDGET SPINNER", "THE STOCK MARKET", "A CALCULATOR"], correct: 0, why: "Boxing is a system of conflict with rules. The Stock Market is real-world utility." },
            { opts: ["MINECRAFT (CREATIVE)", "MINECRAFT (SURVIVAL)", "A SCREENSAVER", "AN IKEA MANUAL"], correct: 1, why: "Survival has a fail state (Death) and goals. Creative is a 'Digital Toy' with no way to lose." },
            { opts: ["BANDERSNATCH (FILM)", "SOLITAIRE", "A LEGO SET", "A PIANO"], correct: 1, why: "Solitaire can be lost (Fail State). Bandersnatch is a Narrative; you just watch a different story." },
            { opts: ["A SLOT MACHINE", "POKER", "A COIN FLIP", "A YOUTUBE VIDEO"], correct: 1, why: "Poker requires skill (Challenge). Slot Machines are gambling tools that lack player agency." },
            { opts: ["AN ESCAPE ROOM", "A TECH DEMO", "A BUS MAP", "A SMART FRIDGE"], correct: 0, why: "Escape Rooms are perfect games with Objectives and Rules. Tech demos are toys for showing hardware." },
            { opts: ["PROFESSIONAL TAG", "A YO-YO", "A WHISTLE", "A POWERPOINT"], correct: 0, why: "Tag has boundaries, rules, and winners. A Yo-Yo is a skill-toy but lacks formal goals." },
            { opts: ["A JIGSAW PUZZLE", "SCRABBLE", "A MICROWAVE", "GOOGLE EARTH"], correct: 1, why: "Scrabble is a dynamic competition. Puzzles are 'Static Challenges' that don't react to you." },
            { opts: ["THE OLYMPICS", "A GYMNASTICS MAT", "A FIRST DATE", "A BUS SCHEDULE"], correct: 0, why: "Olympics are systems of formal games. Dates lack formal win/loss rules." }
        ];

        const finalDuel = {
            desc: "SYSTEM LOG: 22 agents participate in a 90-minute conflict governed by 17 Laws. They must use their bodies to propel a sphere into a designated zone. If the objective is met equally by both sides at the end, the system terminates without a victor. Is this a formal game?",
            ans: true,
            why: "This is Soccer. It meets all 6 criteria: Rules (Laws), Goals (Score), Interaction, Challenge, Feedback, and Participation."
        };

        let cur = 0, scA = 0, scB = 0, locked = false;
        let wagerA = 0, wagerB = 0, choiceA = null, choiceB = null;

        function show(id) { document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen')); document.getElementById(id).classList.add('active-screen'); window.scrollTo(0,0); }

        function startGame() {
            document.getElementById('disp-a').innerText = document.getElementById('name-a').value || "TEAM 1";
            document.getElementById('disp-b').innerText = document.getElementById('name-b').value || "TEAM 2";
            show('game-screen'); load();
        }

        function load() {
            locked = false; const r = rounds[cur];
            document.getElementById('round-num').innerText = `${cur+1}/10`;
            document.getElementById('feedback').style.display = "none";
            document.getElementById('next-btn').style.display = "none";
            document.getElementById('turn-txt').innerText = (cur % 2 === 0) ? `${document.getElementById('disp-a').innerText}'S TURN` : `${document.getElementById('disp-b').innerText}'S TURN`;
            document.getElementById('box-a').classList.toggle('active-team', cur % 2 === 0);
            document.getElementById('box-b').classList.toggle('active-team', cur % 2 !== 0);
            for(let i=0; i<4; i++) { const b = document.getElementById('o'+i); b.innerText = r.opts[i]; b.className = "opt-btn"; }
        }

        function check(idx) {
            if(locked) return; locked = true; const r = rounds[cur];
            const btn = document.getElementById('o'+idx);
            if(idx === r.correct) { btn.classList.add('is-correct'); if(cur%2===0) mod('a',1); else mod('b',1); }
            else { btn.classList.add('is-wrong'); document.getElementById('o'+r.correct).classList.add('is-correct'); }
            document.getElementById('feedback').innerHTML = r.why; document.getElementById('feedback').style.display = "block";
            document.getElementById('next-btn').style.display = "block";
        }

        function mod(t,v) { if(t==='a'){ scA+=v; document.getElementById('score-a').innerText=scA.toString().padStart(2,'0'); } else { scB+=v; document.getElementById('score-b').innerText=scB.toString().padStart(2,'0'); } }

        function next() {
            cur++;
            if(cur < 10) load();
            else triggerWager();
        }

        function triggerWager() {
            document.getElementById('w-name-a').innerText = document.getElementById('disp-a').innerText;
            document.getElementById('w-name-b').innerText = document.getElementById('disp-b').innerText;
            document.getElementById('max-a').innerText = scA;
            document.getElementById('max-b').innerText = scB;
            show('wager-screen');
        }

        function lockWagers() {
            wagerA = parseInt(document.getElementById('wager-a').value) || 0;
            wagerB = parseInt(document.getElementById('wager-b').value) || 0;
            if(wagerA > scA || wagerB > scB || wagerA < 0 || wagerB < 0) { alert("Wagers cannot exceed your current score!"); return; }
            document.getElementById('v-name-a').innerText = document.getElementById('disp-a').innerText;
            document.getElementById('v-name-b').innerText = document.getElementById('disp-b').innerText;
            document.getElementById('final-desc').innerText = finalDuel.desc;
            show('final-screen');
        }

        function cast(team, val) {
            if(team === 'a') { choiceA = val; document.getElementById('va-t').className = val ? 'opt-btn locked' : 'opt-btn'; document.getElementById('va-f').className = !val ? 'opt-btn locked' : 'opt-btn'; }
            else { choiceB = val; document.getElementById('vb-t').className = val ? 'opt-btn locked' : 'opt-btn'; document.getElementById('vb-f').className = !val ? 'opt-btn locked' : 'opt-btn'; }
            if(choiceA !== null && choiceB !== null) document.getElementById('reveal-btn').style.display = "block";
        }

        function resolveDuel() {
            const resA = (choiceA === finalDuel.ans) ? wagerA : -wagerA;
            const resB = (choiceB === finalDuel.ans) ? wagerB : -wagerB;
            mod('a', resA); mod('b', resB);
            alert("REVEAL: " + finalDuel.why + "\n\n" + document.getElementById('disp-a').innerText + ": " + (resA >= 0 ? "+" : "") + resA + "\n" + document.getElementById('disp-b').innerText + ": " + (resB >= 0 ? "+" : "") + resB);
            alert("FINAL STANDINGS:\n" + document.getElementById('disp-a').innerText + ": " + scA + "\n" + document.getElementById('disp-b').innerText + ": " + scB);
            location.reload();
        }
    </script>
</body>
</html>
